<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Nexus v21 - Neural Apex</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --accent: #06b6d4; --bg: #020617; --pro: #f59e0b; }
        body { background: var(--bg); color: white; margin: 0; font-family: 'Inter', system-ui, sans-serif; -webkit-tap-highlight-color: transparent; overflow-x: hidden; }
        
        .glass { background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.08); }
        
        /* Notifica√ß√£o Toast v21 */
        #toast {
            position: fixed; top: -100px; left: 50%; transform: translateX(-50%);
            padding: 12px 24px; border-radius: 100px; font-size: 10px; font-weight: 900;
            text-transform: uppercase; letter-spacing: 2px; z-index: 10001;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
        }
        .toast-active { top: 30px !important; }

        /* Splash Screen Ultra Fast (v20.1) */
        #splash-screen {
            position: fixed; inset: 0; background: var(--bg); z-index: 10000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .scanner-line {
            width: 180px; height: 2px; background: var(--accent);
            box-shadow: 0 0 20px var(--accent);
            position: absolute; animation: scan 1.5s infinite ease-in-out;
        }
        @keyframes scan { 0%, 100% { transform: translateY(-45px); opacity: 0.2; } 50% { transform: translateY(45px); opacity: 1; } }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: fadeInUp 0.3s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .nav-active { color: var(--accent) !important; transform: translateY(-4px); filter: drop-shadow(0 0 10px var(--accent)); }
        .hide-splash { opacity: 0; pointer-events: none; }
    </style>
</head>
<body class="pb-32">

    <div id="toast" class="bg-cyan-500 text-slate-950 shadow-[0_0_20px_rgba(6,182,212,0.5)]">Sincronizado</div>

    <div id="splash-screen">
        <div class="relative w-36 h-36 flex items-center justify-center border-2 border-cyan-500/10 rounded-[2.5rem]">
            <div class="scanner-line"></div>
            <span class="text-5xl font-black text-cyan-500">N</span>
        </div>
        <div class="mt-10 text-center">
            <p id="status-txt" class="text-[9px] font-black uppercase tracking-[0.5em] text-cyan-500/60 font-mono">Neural Auth...</p>
            <div class="w-40 h-1 bg-white/5 mx-auto mt-4 rounded-full overflow-hidden">
                <div id="load-bar" class="h-full bg-cyan-500 transition-all duration-300" style="width: 0%"></div>
            </div>
        </div>
    </div>

    <header class="p-5 flex justify-between items-center sticky top-0 z-50 bg-slate-950/80 backdrop-blur-xl border-b border-white/5">
        <div class="flex items-center gap-4">
            <div onclick="abrirAdmin()" class="w-12 h-12 bg-cyan-500 rounded-2xl flex items-center justify-center font-black text-slate-950 shadow-lg active:scale-90 transition-all">N</div>
            <div>
                <h1 class="text-[11px] font-black uppercase tracking-widest text-white">Nexus <span id="tier-label" class="text-cyan-400">Neural</span></h1>
                <p class="text-[8px] text-emerald-500 font-bold uppercase flex items-center gap-1">
                    <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></span> Sistema Blindado
                </p>
            </div>
        </div>
        <div class="text-right">
            <p id="xp-display" class="text-xs font-black text-white">0 XP</p>
            <div class="w-20 h-1 bg-white/10 rounded-full mt-1 overflow-hidden">
                <div id="xp-bar" class="h-full bg-cyan-500" style="width: 0%"></div>
            </div>
        </div>
    </header>

    <main class="max-w-md mx-auto p-5 space-y-8">
        
        <div id="dash" class="tab-content active space-y-6">
            <div class="glass p-7 rounded-[2.5rem] shadow-2xl">
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-slate-900/60 p-4 rounded-2xl border border-white/5">
                        <label class="text-[9px] font-black text-slate-500 uppercase italic">Peso (kg)</label>
                        <input type="number" id="u-weight" step="0.1" inputmode="decimal" class="bg-transparent w-full text-2xl font-black outline-none mt-1">
                    </div>
                    <div class="bg-slate-900/60 p-4 rounded-2xl border border-white/5">
                        <label class="text-[9px] font-black text-slate-500 uppercase italic">BF (%)</label>
                        <input type="number" id="u-bf" inputmode="decimal" class="bg-transparent w-full text-2xl font-black outline-none mt-1">
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="flex gap-3">
                        <button onclick="setMeta('Bulking')" id="m-Bulking" class="flex-1 py-4 rounded-2xl text-[10px] font-black uppercase border border-white/10 transition-all">Bulking</button>
                        <button onclick="setMeta('Cutting')" id="m-Cutting" class="flex-1 py-4 rounded-2xl text-[10px] font-black uppercase border border-white/10 transition-all">Cutting</button>
                    </div>
                    <div class="grid grid-cols-3 gap-2">
                        <button onclick="setNivel('1')" id="n-1" class="py-3 glass rounded-xl text-[8px] font-black uppercase">Leve</button>
                        <button onclick="setNivel('2')" id="n-2" class="py-3 glass rounded-xl text-[8px] font-black uppercase">Militar</button>
                        <button onclick="setNivel('3')" id="n-3" class="py-3 glass rounded-xl text-[8px] font-black uppercase">Insano</button>
                    </div>
                    <button onclick="gerarProtocolo()" class="w-full bg-cyan-600 py-6 rounded-[2rem] font-black text-xs uppercase shadow-xl shadow-cyan-900/40 active:scale-95 transition-all">Sincronizar Protocolo AI</button>
                </div>
            </div>
            <div id="leaderboard" class="space-y-3"></div>
        </div>

        <div id="treinos" class="tab-content space-y-4">
            <div id="lista-exercicios" class="space-y-4 pb-12"></div>
        </div>

        <div id="pro-features" class="tab-content">
            <div id="lock-pro" class="glass p-12 rounded-[3rem] text-center">
                <div class="text-5xl mb-6">üß†</div>
                <h2 class="text-xl font-black uppercase text-orange-500 mb-4">Neural Advisor</h2>
                <p class="text-[10px] text-slate-500 font-bold uppercase mb-8">IA treinada para gerar planilhas de dieta e periodiza√ß√£o militar.</p>
                <button onclick="abrirModal()" class="bg-gradient-to-r from-amber-500 to-orange-600 px-10 py-5 rounded-2xl font-black text-[10px] uppercase shadow-2xl">Ativar Nexus Pro</button>
            </div>
            <div id="content-pro" class="hidden space-y-6">
                <div class="flex gap-2">
                    <button onclick="toggleIA('dieta')" id="btn-ia-dieta" class="flex-1 py-4 bg-orange-500 rounded-2xl text-[9px] font-black uppercase text-slate-950">Planilha Dieta</button>
                    <button onclick="toggleIA('treino')" id="btn-ia-treino" class="flex-1 py-4 glass rounded-2xl text-[9px] font-black uppercase">Planilha Treino</button>
                </div>
                <div id="ia-output" class="glass p-7 rounded-[2.5rem] min-h-[300px] border-t-2 border-orange-500/30"></div>
            </div>
        </div>

        <div id="hub" class="tab-content">
            <div class="glass p-6 rounded-[2.5rem]">
                <textarea id="msg-input" placeholder="Relate sua conquista..." class="w-full bg-slate-900/30 p-5 rounded-3xl text-sm outline-none mb-4 h-28 border border-white/5 resize-none"></textarea>
                <button onclick="postar()" class="w-full bg-purple-600 py-4 rounded-2xl font-black text-[10px] uppercase shadow-lg shadow-purple-900/20">Publicar no Hub</button>
                <div id="feed" class="mt-8 space-y-4 pb-12"></div>
            </div>
        </div>
    </main>

    <nav class="fixed bottom-6 left-1/2 -translate-x-1/2 w-[92%] max-w-md h-20 glass rounded-[2.5rem] z-50 flex items-center justify-around px-2 shadow-2xl">
        <button onclick="nav(event, 'dash')" class="nav-item nav-active flex flex-col items-center gap-1.5 transition-all"><span class="text-2xl">üë§</span><span class="text-[8px] font-black uppercase">Perfil</span></button>
        <button onclick="nav(event, 'treinos')" class="nav-item text-slate-500 flex flex-col items-center gap-1.5 transition-all"><span class="text-2xl">üí™</span><span class="text-[8px] font-black uppercase">Treino</span></button>
        <button onclick="nav(event, 'pro-features')" class="nav-item text-orange-500/50 flex flex-col items-center gap-1.5 transition-all"><span class="text-2xl">üß†</span><span class="text-[8px] font-black uppercase">Neural</span></button>
        <button onclick="nav(event, 'hub')" class="nav-item text-purple-500/50 flex flex-col items-center gap-1.5 transition-all"><span class="text-2xl">üåç</span><span class="text-[8px] font-black uppercase">Hub</span></button>
    </nav>

    <div id="modal-pay" class="fixed inset-0 bg-black/98 z-[100] hidden items-center justify-center p-6 backdrop-blur-xl">
        <div class="bg-slate-900 p-8 rounded-[3.5rem] w-full max-w-sm text-center border border-white/10 shadow-2xl">
            <h2 class="text-3xl font-black mb-2 text-white uppercase">NEXUS PRO</h2>
            <div id="qr-area" class="bg-white p-5 rounded-3xl mb-8 hidden w-52 mx-auto"><img id="qr-code" class="w-full"></div>
            <button id="btn-pix" onclick="gerarPix()" class="w-full bg-gradient-to-r from-amber-400 to-orange-600 py-6 rounded-3xl font-black text-[11px] uppercase shadow-2xl">Gerar Pix R$ 19,90</button>
            <button onclick="fecharModal()" class="mt-8 text-[10px] text-slate-600 font-black uppercase">Voltar</button>
        </div>
    </div>

    <div id="admin-panel" class="fixed inset-0 bg-slate-950 z-[1000] hidden p-10 flex flex-col justify-center gap-4">
        <h2 class="text-center font-black text-cyan-500 uppercase tracking-widest mb-6">Terminal Root</h2>
        <button onclick="ativarPro()" class="w-full py-6 bg-orange-600 rounded-3xl font-black uppercase text-xs">For√ßar Modo Pro</button>
        <button onclick="db.xp+=10000;save();atualizarUI();showToast('+10k XP Boost')" class="w-full py-6 bg-cyan-900/20 text-cyan-500 border border-cyan-500/30 rounded-3xl font-black uppercase text-xs">Injetar XP</button>
        <button onclick="resetApp()" class="w-full py-6 bg-red-900/20 text-red-500 rounded-3xl font-black uppercase text-xs">Reset Total</button>
        <button onclick="document.getElementById('admin-panel').classList.add('hidden')" class="text-slate-600 uppercase text-[10px] font-black mt-10 text-center">Fechar Terminal</button>
    </div>

    <script>
        const CONFIG = { PIX: "Nandogabriel.1710@gmail.com", WHATS: "5511994025686", NOME: "Fernando Gabriel" };
        let db;

        const Security = {
            sanitize: (s) => s.replace(/[<>]/g, "").trim().substring(0, 300),
            validate: (d) => d && typeof d.xp === 'number'
        };

        function showToast(msg, color = "#06b6d4") {
            const t = document.getElementById('toast');
            t.innerText = msg; t.style.background = color;
            t.classList.add('toast-active');
            setTimeout(() => t.classList.remove('toast-active'), 2500);
        }

        function init() {
            const data = JSON.parse(localStorage.getItem('Nexus_v21_Neural'));
            db = Security.validate(data) ? data : { xp: 0, isPro: false, meta: 'Bulking', weight: '', bf: '', nivel: '2' };
        }

        function save() { localStorage.setItem('Nexus_v21_Neural', JSON.stringify(db)); }

        // BOOT ULTRA-FAST (v20.1)
        (function boot() {
            init();
            window.addEventListener('load', () => {
                const bar = document.getElementById('load-bar');
                bar.style.width = "100%";
                setTimeout(() => {
                    document.getElementById('u-weight').value = db.weight;
                    document.getElementById('u-bf').value = db.bf;
                    atualizarUI();
                    document.getElementById('splash-screen').classList.add('hide-splash');
                    showToast("Nexus Neural Ativo");
                }, 400);
            });
        })();

        function atualizarUI() {
            document.getElementById('xp-display').innerText = `${db.xp.toLocaleString()} XP`;
            document.getElementById('xp-bar').style.width = Math.min((db.xp % 5000) / 50, 100) + "%";
            document.getElementById('tier-label').innerText = db.isPro ? "NEURAL PRO" : "NEURAL APEX";

            ['Bulking', 'Cutting'].forEach(m => {
                document.getElementById('m-'+m).className = db.meta === m ? "flex-1 py-4 bg-cyan-600 rounded-2xl text-[10px] font-black uppercase text-slate-950 shadow-lg" : "flex-1 py-4 glass rounded-2xl text-[10px] font-black uppercase text-slate-500";
            });

            ['1', '2', '3'].forEach(n => {
                document.getElementById('n-'+n).className = db.nivel === n ? "py-3 bg-white rounded-xl text-[8px] font-black uppercase text-slate-950" : "py-3 glass rounded-xl text-[8px] font-black uppercase text-slate-500";
            });

            if(db.isPro) {
                document.getElementById('lock-pro').classList.add('hidden');
                document.getElementById('content-pro').classList.remove('hidden');
                toggleIA('dieta');
            }
            renderRank();
        }

        // NEURAL ENGINE (NOVO v21)
        function toggleIA(tipo) {
            const out = document.getElementById('ia-output');
            const p = parseFloat(db.weight) || 70;
            const meta = db.meta;
            const n = parseInt(db.nivel);
            
            document.getElementById('btn-ia-dieta').className = tipo === 'dieta' ? "flex-1 py-4 bg-orange-500 rounded-2xl text-[9px] font-black uppercase text-slate-950" : "flex-1 py-4 glass rounded-2xl text-[9px] font-black uppercase text-slate-500";
            document.getElementById('btn-ia-treino').className = tipo === 'treino' ? "flex-1 py-4 bg-orange-500 rounded-2xl text-[9px] font-black uppercase text-slate-950" : "flex-1 py-4 glass rounded-2xl text-[9px] font-black uppercase text-slate-500";

            if(tipo === 'dieta') {
                const kcal = meta === 'Bulking' ? Math.round(p * 37) : Math.round(p * 25);
                const prot = Math.round(p * 2.2);
                out.innerHTML = `
                    <p class='text-[8px] font-black text-orange-500 uppercase tracking-widest mb-4'>Planilha Alimentar Neural</p>
                    <div class='flex justify-between mb-6'>
                        <div><p class='text-[7px] text-slate-500 uppercase'>Meta Calorias</p><p class='text-xl font-black'>${kcal} kcal</p></div>
                        <div class='text-right'><p class='text-[7px] text-slate-500 uppercase'>Prote√≠na Alvo</p><p class='text-xl font-black text-orange-500'>${prot}g</p></div>
                    </div>
                    <div class='space-y-4 text-[10px]'>
                        <div class='bg-white/5 p-4 rounded-xl'><b class='text-orange-500'>MANH√É:</b> 4 Ovos + 60g Aveia + Caf√© sem a√ß√∫car</div>
                        <div class='bg-white/5 p-4 rounded-xl'><b class='text-orange-500'>ALMO√áO:</b> 200g Frango/Carne + 200g Arroz + Vegetais</div>
                        <div class='bg-white/5 p-4 rounded-xl'><b class='text-orange-500'>TARDE:</b> 30g Whey + 1 Fruta + 20g Pasta Amendoim</div>
                        <div class='bg-white/5 p-4 rounded-xl'><b class='text-orange-500'>NOITE:</b> 150g Prote√≠na + Salada √† vontade</div>
                    </div>`;
            } else {
                const vol = n === 3 ? "Alta Intensidade" : "Volume Moderado";
                out.innerHTML = `
                    <p class='text-[8px] font-black text-orange-500 uppercase tracking-widest mb-4'>Periodiza√ß√£o de Elite</p>
                    <div class='space-y-3'>
                        <div class='bg-white/5 p-4 rounded-2xl border-l-2 border-orange-500'>
                            <p class='font-black text-[9px] text-orange-400'>DIVIS√ÉO A: Empurrar (Peito/Ombro/Tr√≠ceps)</p>
                            <p class='text-[9px] text-slate-400 mt-1'>Foco em cargas progressivas. S√©ries: ${n === 3 ? '5x8' : '4x12'}</p>
                        </div>
                        <div class='bg-white/5 p-4 rounded-2xl border-l-2 border-orange-500'>
                            <p class='font-black text-[9px] text-orange-400'>DIVIS√ÉO B: Puxar (Costas/B√≠ceps)</p>
                            <p class='text-[9px] text-slate-400 mt-1'>Remadas e Puxadas. S√©ries: ${n === 3 ? '5x8' : '4x12'}</p>
                        </div>
                        <div class='bg-white/5 p-4 rounded-2xl border-l-2 border-orange-500'>
                            <p class='font-black text-[9px] text-orange-400'>DIVIS√ÉO C: Inferiores Completos</p>
                            <p class='text-[9px] text-slate-400 mt-1'>Agachamentos e Stiff. S√©ries: ${n === 3 ? '5x10' : '4x15'}</p>
                        </div>
                    </div>`;
            }
        }

        function gerarProtocolo() {
            showToast("Calculando Neural...");
            const list = document.getElementById('lista-exercicios');
            const n = parseInt(db.nivel);
            const treinos = db.meta === 'Bulking' ? [{n:'Supino Inclinado', s:'4x10', x:120*n}, {n:'Agachamento', s:'4x10', x:150*n}, {n:'Remada Curvada', s:'4x10', x:110*n}] : [{n:'Burpees', s:(12*n)+' Reps', x:180*n}, {n:'Flex√µes', s:'Falha', x:140*n}, {n:'Prancha', s:'1 Min', x:120*n}];
            
            setTimeout(() => {
                list.innerHTML = `<h3 class='text-[10px] font-black text-cyan-500 uppercase italic mb-4'>Treino Sincronizado</h3>`;
                treinos.forEach(ex => {
                    list.innerHTML += `<div class='glass p-6 rounded-[2rem] border-l-4 border-cyan-500 flex justify-between items-center mb-4 active:scale-95 transition-all'><div><p class='font-black uppercase text-xs'>${ex.n}</p><p class='text-[9px] text-slate-500 font-bold'>${ex.s}</p></div><button onclick="addXP(this, ${ex.x})" class='w-12 h-12 bg-cyan-500/10 rounded-2xl text-xl transition-all active:bg-cyan-500 active:text-slate-900'>‚ö°</button></div>`;
                });
                nav(null, 'treinos');
                showToast("Treino Carregado!", "#10b981");
            }, 500);
        }

        function addXP(btn, v) { db.xp += v; save(); atualizarUI(); btn.innerHTML = 'üèÜ'; btn.disabled = true; btn.classList.add('opacity-30'); showToast(`+${v} XP`, "#10b981"); }
        function setMeta(m) { db.meta = m; save(); atualizarUI(); showToast(`Foco: ${m}`); }
        function setNivel(n) { db.nivel = n; save(); atualizarUI(); showToast(`N√≠vel ${n} Ativo`); }

        function renderRank() {
            const r = [{n:'Sovereign Neural', x:500000, s:'üëë'}, {n:'Voc√™', x:db.xp, s:'‚ö°'}].sort((a,b)=>b.x-a.x);
            document.getElementById('leaderboard').innerHTML = `<p class='text-[9px] font-black uppercase text-slate-700 mb-3 ml-2'>Ranking Global Neural</p>` + r.map((u,i)=>`<div class='bg-slate-900
